!function(e){var t={};function s(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=682)}({682:function(e,t,s){"use strict";!function(e){var t=function(e,t){jQuery.ajax({beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",PM_Global_Vars.permission)},url:PM_Global_Vars.rest_url+"/pm/v2/admin-topbar-search",data:{query:e,model:"project"},success:function(e){"function"==typeof t&&t(e)}})},s=function(e){var t=null;switch(e.type){case"task":t="#/projects/"+e.project_id+"/task-lists/tasks/"+e.id;break;case"subtask":t="#/projects/"+e.project_id+"/task-lists/tasks/"+e.parent_id;break;case"project":t="#/projects/"+e.id+"/task-lists/";break;case"milestone":t="#/projects/"+e.project_id+"/milestones/";break;case"discussion_board":break;case"task_list":t="#/projects/"+e.project_id+"/task-lists/"+e.id;break;default:t=t}return t?PM_Global_Vars.project_page+t:t},n=function(e){jQuery.ajax({beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",PM_Global_Vars.permission)},url:PM_Global_Vars.rest_url+"/pm/v2/projects?project_transform=false&per_page=all",data:{},success:function(t){console.log(t),"function"==typeof e&&e(t)}})};e.widget("custom.pmautocomplete",e.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items","> :not(.pm-search-type)")}}),e(document).ready(function(){var a=!1,o=!1,i=!1,r=e("#pmswitchproject");function c(){r.css("display","block").addClass("active"),r.find("input").focus(),r.find("input").val("")}e(document).bind("keydown",function(e){var t=e.keyCode||e.which;17!==t&&91!==t&&93!==t||i?o||!a||74!==t||i?o&&a&&74===t?(e.preventDefault(),o=!1,i=!1,r.css("display","none").removeClass("active")):i=!0:(e.preventDefault(),o=!0,i=!1,c()):(a=!0,i=!1),27===t&&(o=!1,a=!1,i=!1,r.css("display","none").removeClass("active"))}),e(document).bind("keyup",function(e){var t=e.keyCode||e.which;i=!1,17!==t&&91!==t&&93!==t||(a=!1)}),e(document).bind("click",function(t){e(t.target).closest("#wp-admin-bar-pm_search").length||e(t.target).closest("#wp-admin-bar-pm_create_task").length||e(t.target).closest(".pmswitcharea").length||e(t.target).closest("#pmcteatetask .inner").length||(e(this).find("#pmswitchproject").hasClass("active")&&(o=!1,a=!1,i=!1,r.css("display","none").removeClass("active")),e(this).find("#pmcteatetask").hasClass("active")&&l.css("display","none").removeClass("active"))}),e("#wp-admin-bar-pm_search a").bind("click",function(e){c()});var p=[];r.find("input").pmautocomplete({autoFocus:!0,appendTo:".pm-spresult",source:function(s,n){var a=this;if(e(this).removeClass("pm-open"),!s.term.trim()&&p.length)return n(p),void e(a).removeClass("pm-sspinner");if(s.term.trim()||p.length){var o=e.ui.autocomplete.escapeRegex(s.term),i=new RegExp(o,"ig"),r=e.grep(p,function(e){return i.test(e.title)});r.length&&(n(r),e(a).removeClass("pm-sspinner")),t(s.term,function(t){p=t,n(t),e(a).removeClass("pm-sspinner")})}else t("",function(t){p=t,n(t),e(a).removeClass("pm-sspinner")})},search:function(t,s){e(this).addClass("pm-sspinner")},open:function(){e(this).removeClass("pm-sspinner"),e(this).addClass("pm-open"),e(this).pmautocomplete("widget").css({"z-index":999999,position:"relative",top:0,left:0})},select:function(e,t){var n=s(t.item);n&&(location.href=n,r.css("display","none").removeClass("active"),o=!1)}}).focus(function(){e(this).data("custom-pmautocomplete").search(" ")}).data("custom-pmautocomplete")._renderItem=function(t,n){return void 0!==n.no_result?e('<li class="no-result">').data("ui-autocomplete-item",n).append(n.no_result).appendTo(t):e("<li>").data("ui-autocomplete-item",n).append("<span class='icon-pm-incomplete'></span>").append("<a href='"+s(n)+"'>"+n.title+"</a>").appendTo(t)};var l=e("#pmcteatetask");e("#wp-admin-bar-pm_create_task a").bind("click",function(e){e.preventDefault(),l.css("display","block").addClass("active"),n(function(e){var t="";t+="<select name='project' id='project' >",t+="<option value='0' selected > Select A project </option>",e.data.map(function(e){t+="<option value="+e.id+"  > "+e.title+" </option>"}),t+="</select>",l.find(".select-project").html(t)})}),e("#newtaskform").submit(function(e){e.preventDefault()})})}(jQuery)}});