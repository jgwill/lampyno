var currentPageURL=document.location.toString(),isAnchor=!1;location.hash&&(isAnchor=!0,window.scrollTo(0,0)),function(e){if(!window.useManagedSmoothScroll){var t,n,r,i,a,o=1500,u="easeInOutQuart",c=!1,l="ontouchstart"in document.documentElement;if(l||jQuery(window).scroll(function(){clearTimeout(i),i=setTimeout(p,20)}),jQuery(window).bind("resize orientationchange",function(){clearTimeout(a),a=setTimeout(m,100)}),g(),(l="ontouchstart"in document.documentElement)||p(),isAnchor)if(jQuery.find('a[href^="'+currentPageURL+'"]').length>0)jQuery(jQuery.find('a[href="'+currentPageURL+'"]')).trigger("click");else{var s=h(currentPageURL);s.length&&jQuery(jQuery.find('a[href*="#'+s+'"]')).trigger("click")}else jQuery('a[href*="#"]').each(function(e,t){var n=t.href.split("#"),r=n[n.length-1];n.length>=2&&r.length&&jQuery(this).parent().andSelf().removeClass("current_page_item current-menu-item")});window.wp&&window.wp.customize&&e(".dropdown-menu").parent("div").parent().on("DOMNodeInserted DOMNodeRemoved",function(e){g(),p()}),window.scrollToSection=f,window.smoothScrollGetAnchors=g}function h(e){if(!e)return!1;var t=e.indexOf("#");if(t>-1){if(0===t)return e.replace("#","");var n=e.substring(t+1),r="";e.indexOf("?")>-1&&(r=e.substring(e.indexOf("?")));var i=/(https?|file):\/\//,a=window.location.pathname,o=e.replace(r,"").replace("#"+n,"").replace(i,"");if(e.match(i)?a=window.location.host+a:o=a.substring(0,a.lastIndexOf("/"))+"/"+o,a==o||a==o+"/")return n}return!1}function f(e,t){if(!c)try{if(c=!0,e){var n;t&&(n=t.parent().parentsUntil("body").filter(function(){if("fixed"==jQuery(this).css("position")&&!jQuery(this).is(".mobile-overlay"))return jQuery(this)}).eq(0));var r=0;if(n&&n.length){n.attr("class"),jQuery('div[class*="main-menu"]');n.outerHeight()===window.innerHeight&&n.is(".full-sidebar")||(r=n.outerHeight()+n.position().top)}var i=e.offset().top-r;i<0&&(i=0),i>jQuery("[data-cp-shrink=initial]").height()&&(i-=jQuery("[data-cp-shrink=shrinked]").height());var a=Math.max(.5,i/jQuery("body").height());return jQuery("html, body").animate({scrollTop:i},o*a,u,function(){c=!1,jQuery(window).trigger("scroll"),jQuery(document).trigger("scroll")}),!0}}catch(e){}}function d(e,t){if(!(n=t.attr("target"))||"_self"==n){var n,r=!!t.data("onepage-section")&&t.data("onepage-section");r&&r.length&&e.preventDefault(),f(r,t)&&e&&e.preventDefault()}}function g(){r=[],(n=jQuery("a").filter(function(){var t=jQuery(this),n=t.attr("href"),i=(t.attr("target"),h(n));if(i&&"wp-toolbar"!==i)try{var a=jQuery("#"+i);if(a.length>0){if(t.data("onepage-section",a),"LI"==t.parent()[0].tagName){var o=a.data("onepage-anchor")||e("");o=o.add(t),a.data("onepage-anchor",o)}return r.push(a),!0}}catch(e){}return!1})).each(function(){if(!jQuery(this).closest(".fm2_mobile_jq_menu").length&&jQuery(this).is(":visible"))if(jQuery(this).parent().is("li.menu-item")){var e=this;jQuery(this).unbind("click.onepage"),jQuery(this).attr("data-smoothscroll","true"),jQuery(this).parent().unbind("click.onepage").bind("click.onepage",function(t){jQuery(t.target).parent().is(t.currentTarget)&&(t.preventDefault(),t.stopPropagation(),d(t,jQuery(e)))})}else jQuery(this).unbind("click.onepage").bind("click.onepage",function(e){d(e,jQuery(this))})});try{!function(e){var t;do{t=!1;for(var n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];if(r.offset().top>i.offset().top){var a=e[n];e[n]=e[n+1],e[n+1]=a,t=!0}}}while(t)}(r)}catch(e){}}function p(){var i=jQuery(window),a=i.scrollTop()+.5*window.innerHeight,o=[];r||g();for(var u=0;u<r.length;u++)r[u].offset().top<a&&o.push(r[u]);var c=r[r.length-1];i.scrollTop()+i.height()+50>=jQuery(document).height()&&o.push(c);var l,s=(o=o[o.length-1])&&o.length?o[0].id:"";if(l=s,setTimeout(function(){l=l?"#"+l:"",history&&history.replaceState&&history.replaceState({},"",l)},100),0===s.length&&n&&(n.parent().andSelf().removeClass("current_page_item current-menu-item"),loc=(window.location+"").split("#")[0].replace(/\/$/,""),n.closest("ul").find('[href$="'+loc+'"]').parent().andSelf().addClass("current-menu-item"),loc.length||n.closest("ul").find('[href$="'+window.location+'"]').parent().andSelf().addClass("current-menu-item")),t!==s&&s.length){t=s;try{n.filter(".current_page_item, .current-menu-item").each(function(){jQuery(this).parent().andSelf().removeClass("current_page_item current-menu-item")}),n.closest("ul").find(".current_page_item, .current-menu-item").removeClass("current_page_item current-menu-item"),o.data("onepage-anchor").each(function(){e(this).parent().andSelf().addClass("current-menu-item")})}catch(e){}}}function m(){g()}}(jQuery);
